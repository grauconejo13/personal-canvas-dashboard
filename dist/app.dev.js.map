{"version":3,"sources":["app.js"],"names":["widgetData","JSON","parse","localStorage","getItem","titleEl","document","getElementById","TITLE_LIMIT","savedTitle","textContent","addEventListener","length","slice","placeCaretAtEnd","setItem","trim","el","focus","getSelection","selectAllChildren","collapseToEnd","documentElement","dataset","theme","setTheme","grid","GridStack","init","cellHeight","disableOneColumnMode","oneColumnSize","savedLayout","load","setTimeout","hydrateWidget","on","stringify","save","addTextWidget","savedId","savedText","widgetId","Date","now","addWidget","w","h","content","attachWidgetEvents","querySelectorAll","forEach","btn","onclick","e","item","target","closest","widget","id","removeWidget","attachTextPersistence","textarea","oninput","value","resetDashboard","confirmed","confirm","removeAll","removeItem","addChecklistWidget","savedItems","itemsHTML","map","checked","text","join","attachChecklistEvents","items","row","querySelector","input","onchange","createElement","className","innerHTML","insertBefore","hydrateWidgets","type","list","addBtn","i","remove"],"mappings":"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","sourcesContent":["let widgetData = JSON.parse(localStorage.getItem(\"widgetData\")) || {};\r\n\r\nconst titleEl = document.getElementById(\"dashboard-title\");\r\nconst TITLE_LIMIT = 32;\r\n\r\n// Load saved title\r\nconst savedTitle = localStorage.getItem(\"dashboardTitle\");\r\nif (savedTitle) {\r\n    titleEl.textContent = savedTitle;\r\n}\r\n\r\n// Enforce limit + save\r\ntitleEl.addEventListener(\"input\", () => {\r\n    if (titleEl.textContent.length > TITLE_LIMIT) {\r\n        titleEl.textContent = titleEl.textContent.slice(0, TITLE_LIMIT);\r\n        placeCaretAtEnd(titleEl);\r\n    }\r\n    localStorage.setItem(\"dashboardTitle\", titleEl.textContent.trim());\r\n});\r\n\r\n// Helper to keep cursor at end\r\nfunction placeCaretAtEnd(el) {\r\n    el.focus();\r\n    document.getSelection().selectAllChildren(el);\r\n    document.getSelection().collapseToEnd();\r\n}\r\n\r\n// Theme\r\ndocument.documentElement.dataset.theme =\r\n    localStorage.getItem(\"theme\") || \"dark\";\r\n\r\nfunction setTheme(theme) {\r\n    document.documentElement.dataset.theme = theme;\r\n    localStorage.setItem(\"theme\", theme);\r\n}\r\n\r\n// Init Gridstack\r\nconst grid = GridStack.init({\r\n    float: true,\r\n    cellHeight: 120,\r\n    disableOneColumnMode: false,\r\n    oneColumnSize: 600\r\n});\r\n\r\n\r\n// Load saved layout\r\nconst savedLayout = JSON.parse(localStorage.getItem(\"layout\"));\r\nif (savedLayout) {\r\n    grid.load(savedLayout);\r\n    setTimeout(hydrateWidget, 100);\r\n}\r\n\r\n// Save layout on change\r\ngrid.on(\"change\", () => {\r\n    localStorage.setItem(\"layout\", JSON.stringify(grid.save(true)));\r\n});\r\n\r\n// Add text widget\r\nfunction addTextWidget(savedId = null, savedText = \"\") {\r\n    const widgetId = savedId || `widget-${Date.now()}`;\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 2,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <textarea\r\n          class=\"widget-text\"\r\n          placeholder=\"Write here...\">${savedText}</textarea>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction attachWidgetEvents() {\r\n    document.querySelectorAll(\".delete-btn\").forEach(btn => {\r\n        btn.onclick = (e) => {\r\n            const item = e.target.closest(\".grid-stack-item\");\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n\r\n            delete widgetData[id];\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n\r\n            grid.removeWidget(item);\r\n        };\r\n    });\r\n\r\n    attachTextPersistence();\r\n}\r\n\r\nfunction attachTextPersistence() {\r\n    document.querySelectorAll(\".widget-text\").forEach(textarea => {\r\n        textarea.oninput = (e) => {\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n            widgetData[id] = e.target.value;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n    });\r\n}\r\n\r\nfunction resetDashboard() {\r\n    const confirmed = confirm(\r\n        \"This will clear all widgets and notes. Are you sure?\"\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    grid.removeAll();\r\n    localStorage.removeItem(\"layout\");\r\n    localStorage.removeItem(\"widgetData\");\r\n\r\n    widgetData = {};\r\n}\r\n\r\n\r\nfunction addChecklistWidget(savedId = null, savedItems = []) {\r\n    const widgetId = savedId || `checklist-${Date.now()}`;\r\n\r\n    const itemsHTML = savedItems.map(\r\n        item => `\r\n      <label class=\"check-item\">\r\n        <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n        <input type=\"text\" value=\"${item.text}\" />\r\n      </label>\r\n    `\r\n    ).join(\"\");\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 3,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\" data-type=\"checklist\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <div class=\"checklist\">\r\n          ${itemsHTML}\r\n          <button class=\"add-item\">＋ Add item</button>\r\n        </div>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}\r\n\r\nfunction attachChecklistEvents() {\r\n    document.querySelectorAll(\".widget[data-type='checklist']\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n\r\n        const save = () => {\r\n            const items = [...widget.querySelectorAll(\".check-item\")].map(row => ({\r\n                text: row.querySelector(\"input[type='text']\").value,\r\n                checked: row.querySelector(\"input[type='checkbox']\").checked\r\n            }));\r\n\r\n            widgetData[id] = items;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n\r\n        widget.querySelectorAll(\"input\").forEach(input => {\r\n            input.oninput = save;\r\n            input.onchange = save;\r\n        });\r\n\r\n        widget.querySelector(\".add-item\").onclick = () => {\r\n            const row = document.createElement(\"label\");\r\n            row.className = \"check-item\";\r\n            row.innerHTML = `\r\n        <input type=\"checkbox\" />\r\n        <input type=\"text\" placeholder=\"List item\" />\r\n      `;\r\n            widget.querySelector(\".checklist\").insertBefore(row, widget.querySelector(\".add-item\"));\r\n            attachChecklistEvents();\r\n            save();\r\n        };\r\n    });\r\n}\r\n\r\nfunction hydrateWidgets() {\r\n    document.querySelectorAll(\".widget\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n        const type = widget.dataset.type;\r\n\r\n        // TEXT WIDGET\r\n        if (!type && widgetData[id]) {\r\n            const textarea = widget.querySelector(\".widget-text\");\r\n            if (textarea) textarea.value = widgetData[id];\r\n        }\r\n\r\n        // CHECKLIST WIDGET\r\n        if (type === \"checklist\" && widgetData[id]) {\r\n            const list = widget.querySelector(\".checklist\");\r\n            const addBtn = list.querySelector(\".add-item\");\r\n\r\n            // Clear existing items\r\n            list.querySelectorAll(\".check-item\").forEach(i => i.remove());\r\n\r\n            widgetData[id].forEach(item => {\r\n                const row = document.createElement(\"label\");\r\n                row.className = \"check-item\";\r\n                row.innerHTML = `\r\n          <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n          <input type=\"text\" value=\"${item.text}\" />\r\n        `;\r\n                list.insertBefore(row, addBtn);\r\n            });\r\n        }\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}"],"file":"app.dev.js"}