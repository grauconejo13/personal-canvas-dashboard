{"version":3,"sources":["app.js"],"names":["widgetData","JSON","parse","localStorage","getItem","document","documentElement","dataset","theme","setTheme","setItem","grid","GridStack","init","cellHeight","disableOneColumnMode","savedLayout","load","setTimeout","hydrateWidgetText","on","stringify","save","addTextWidget","savedId","savedText","widgetId","Date","now","addWidget","w","h","content","attachWidgetEvents","querySelectorAll","forEach","btn","onclick","e","item","target","closest","widget","id","removeWidget","attachTextPersistence","textarea","oninput","value","resetDashboard","confirmed","confirm","removeAll","removeItem","querySelector","addChecklistWidget","savedItems","itemsHTML","map","checked","text","join","attachChecklistEvents","items","row","input","onchange","createElement","className","innerHTML","insertBefore"],"mappings":"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","sourcesContent":["let widgetData = JSON.parse(localStorage.getItem(\"widgetData\")) || {};\r\n\r\n// Theme\r\ndocument.documentElement.dataset.theme =\r\n    localStorage.getItem(\"theme\") || \"dark\";\r\n\r\nfunction setTheme(theme) {\r\n    document.documentElement.dataset.theme = theme;\r\n    localStorage.setItem(\"theme\", theme);\r\n}\r\n\r\n// Init Gridstack\r\nconst grid = GridStack.init({\r\n    float: true,\r\n    cellHeight: 120,\r\n    disableOneColumnMode: false\r\n});\r\n\r\n// Load saved layout\r\nconst savedLayout = JSON.parse(localStorage.getItem(\"layout\"));\r\nif (savedLayout) {\r\n    grid.load(savedLayout);\r\n    setTimeout(hydrateWidgetText, 100);\r\n}\r\n\r\n\r\n// Save layout on change\r\ngrid.on(\"change\", () => {\r\n    localStorage.setItem(\"layout\", JSON.stringify(grid.save(true)));\r\n});\r\n\r\n// Add text widget\r\nfunction addTextWidget(savedId = null, savedText = \"\") {\r\n    const widgetId = savedId || `widget-${Date.now()}`;\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 2,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <textarea\r\n          class=\"widget-text\"\r\n          placeholder=\"Write here...\">${savedText}</textarea>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction attachWidgetEvents() {\r\n    document.querySelectorAll(\".delete-btn\").forEach(btn => {\r\n        btn.onclick = (e) => {\r\n            const item = e.target.closest(\".grid-stack-item\");\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n\r\n            delete widgetData[id];\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n\r\n            grid.removeWidget(item);\r\n        };\r\n    });\r\n\r\n    attachTextPersistence();\r\n}\r\n\r\nfunction attachTextPersistence() {\r\n    document.querySelectorAll(\".widget-text\").forEach(textarea => {\r\n        textarea.oninput = (e) => {\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n            widgetData[id] = e.target.value;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n    });\r\n}\r\n\r\nfunction resetDashboard() {\r\n    const confirmed = confirm(\r\n        \"This will clear all widgets and notes. Are you sure?\"\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    grid.removeAll();\r\n    localStorage.removeItem(\"layout\");\r\n    localStorage.removeItem(\"widgetData\");\r\n\r\n    widgetData = {};\r\n}\r\n\r\nfunction hydrateWidgetText() {\r\n    document.querySelectorAll(\".widget\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n        const textarea = widget.querySelector(\".widget-text\");\r\n\r\n        if (widgetData[id]) {\r\n            textarea.value = widgetData[id];\r\n        }\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction addChecklistWidget(savedId = null, savedItems = []) {\r\n    const widgetId = savedId || `checklist-${Date.now()}`;\r\n\r\n    const itemsHTML = savedItems.map(\r\n        item => `\r\n      <label class=\"check-item\">\r\n        <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n        <input type=\"text\" value=\"${item.text}\" />\r\n      </label>\r\n    `\r\n    ).join(\"\");\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 3,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\" data-type=\"checklist\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <div class=\"checklist\">\r\n          ${itemsHTML}\r\n          <button class=\"add-item\">＋ Add item</button>\r\n        </div>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}\r\n\r\nfunction attachChecklistEvents() {\r\n    document.querySelectorAll(\".widget[data-type='checklist']\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n\r\n        const save = () => {\r\n            const items = [...widget.querySelectorAll(\".check-item\")].map(row => ({\r\n                text: row.querySelector(\"input[type='text']\").value,\r\n                checked: row.querySelector(\"input[type='checkbox']\").checked\r\n            }));\r\n\r\n            widgetData[id] = items;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n\r\n        widget.querySelectorAll(\"input\").forEach(input => {\r\n            input.oninput = save;\r\n            input.onchange = save;\r\n        });\r\n\r\n        widget.querySelector(\".add-item\").onclick = () => {\r\n            const row = document.createElement(\"label\");\r\n            row.className = \"check-item\";\r\n            row.innerHTML = `\r\n        <input type=\"checkbox\" />\r\n        <input type=\"text\" placeholder=\"List item\" />\r\n      `;\r\n            widget.querySelector(\".checklist\").insertBefore(row, widget.querySelector(\".add-item\"));\r\n            attachChecklistEvents();\r\n            save();\r\n        };\r\n    });\r\n}"],"file":"app.dev.js"}