{"version":3,"sources":["app.js"],"names":["widgetData","JSON","parse","localStorage","getItem","titleEl","document","getElementById","TITLE_LIMIT","savedTitle","addEventListener","el","textContent","slice","placeCaretAtEnd","collapseToEnd","focus","theme","getSelection","selectAllChildren","length","trim","documentElement","dataset","float","cellHeight","setTheme","setItem","savedLayout","addTextWidget","savedText","arguments","undefined","widgetId","concat","Date","now","w","h","content","attachWidgetEvents","widget","closest","forEach","btn","onclick","id","target","removeWidget","e","attachTextPersistence","stringify","grid","item","querySelectorAll","textarea","oninput","resetDashboard","value","confirmed","confirm","itemsHTML","removeItem","savedItems","attachChecklistEvents","map","checked","text","join","row","hydrateWidgets","querySelector","input","save","list","remove","createElement","className","innerHTML","insertBefore","addBtn","type","i","disableOneColumnMode","oneColumnSize","hydrateWidget","on"],"mappings":"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","file":"app.min.js","sourcesContent":["let widgetData = JSON.parse(localStorage.getItem(\"widgetData\")) || {};\r\n\r\nconst titleEl = document.getElementById(\"dashboard-title\");\r\nconst TITLE_LIMIT = 32;\r\n\r\n// Load saved title\r\nconst savedTitle = localStorage.getItem(\"dashboardTitle\");\r\nif (savedTitle) {\r\n    titleEl.textContent = savedTitle;\r\n}\r\n\r\n// Enforce limit + save\r\ntitleEl.addEventListener(\"input\", () => {\r\n    if (titleEl.textContent.length > TITLE_LIMIT) {\r\n        titleEl.textContent = titleEl.textContent.slice(0, TITLE_LIMIT);\r\n        placeCaretAtEnd(titleEl);\r\n    }\r\n    localStorage.setItem(\"dashboardTitle\", titleEl.textContent.trim());\r\n});\r\n\r\n// Helper to keep cursor at end\r\nfunction placeCaretAtEnd(el) {\r\n    el.focus();\r\n    document.getSelection().selectAllChildren(el);\r\n    document.getSelection().collapseToEnd();\r\n}\r\n\r\n// Theme\r\ndocument.documentElement.dataset.theme =\r\n    localStorage.getItem(\"theme\") || \"dark\";\r\n\r\nfunction setTheme(theme) {\r\n    document.documentElement.dataset.theme = theme;\r\n    localStorage.setItem(\"theme\", theme);\r\n}\r\n\r\n// Init Gridstack\r\nconst grid = GridStack.init({\r\n    float: true,\r\n    cellHeight: 120,\r\n    disableOneColumnMode: false,\r\n    oneColumnSize: 600\r\n});\r\n\r\n\r\n// Load saved layout\r\nconst savedLayout = JSON.parse(localStorage.getItem(\"layout\"));\r\nif (savedLayout) {\r\n    grid.load(savedLayout);\r\n    setTimeout(hydrateWidget, 100);\r\n}\r\n\r\n// Save layout on change\r\ngrid.on(\"change\", () => {\r\n    localStorage.setItem(\"layout\", JSON.stringify(grid.save(true)));\r\n});\r\n\r\n// Add text widget\r\nfunction addTextWidget(savedId = null, savedText = \"\") {\r\n    const widgetId = savedId || `widget-${Date.now()}`;\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 2,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <textarea\r\n          class=\"widget-text\"\r\n          placeholder=\"Write here...\">${savedText}</textarea>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction attachWidgetEvents() {\r\n    document.querySelectorAll(\".delete-btn\").forEach(btn => {\r\n        btn.onclick = (e) => {\r\n            const item = e.target.closest(\".grid-stack-item\");\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n\r\n            delete widgetData[id];\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n\r\n            grid.removeWidget(item);\r\n        };\r\n    });\r\n\r\n    attachTextPersistence();\r\n}\r\n\r\nfunction attachTextPersistence() {\r\n    document.querySelectorAll(\".widget-text\").forEach(textarea => {\r\n        textarea.oninput = (e) => {\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n            widgetData[id] = e.target.value;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n    });\r\n}\r\n\r\nfunction resetDashboard() {\r\n    const confirmed = confirm(\r\n        \"This will clear all widgets and notes. Are you sure?\"\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    grid.removeAll();\r\n    localStorage.removeItem(\"layout\");\r\n    localStorage.removeItem(\"widgetData\");\r\n\r\n    widgetData = {};\r\n}\r\n\r\n\r\nfunction addChecklistWidget(savedId = null, savedItems = []) {\r\n    const widgetId = savedId || `checklist-${Date.now()}`;\r\n\r\n    const itemsHTML = savedItems.map(\r\n        item => `\r\n      <label class=\"check-item\">\r\n        <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n        <input type=\"text\" value=\"${item.text}\" />\r\n      </label>\r\n    `\r\n    ).join(\"\");\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 3,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\" data-type=\"checklist\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <div class=\"checklist\">\r\n          ${itemsHTML}\r\n          <button class=\"add-item\">＋ Add item</button>\r\n        </div>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}\r\n\r\nfunction attachChecklistEvents() {\r\n    document.querySelectorAll(\".widget[data-type='checklist']\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n\r\n        const save = () => {\r\n            const items = [...widget.querySelectorAll(\".check-item\")].map(row => ({\r\n                text: row.querySelector(\"input[type='text']\").value,\r\n                checked: row.querySelector(\"input[type='checkbox']\").checked\r\n            }));\r\n\r\n            widgetData[id] = items;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n\r\n        widget.querySelectorAll(\"input\").forEach(input => {\r\n            input.oninput = save;\r\n            input.onchange = save;\r\n        });\r\n\r\n        widget.querySelector(\".add-item\").onclick = () => {\r\n            const row = document.createElement(\"label\");\r\n            row.className = \"check-item\";\r\n            row.innerHTML = `\r\n        <input type=\"checkbox\" />\r\n        <input type=\"text\" placeholder=\"List item\" />\r\n      `;\r\n            widget.querySelector(\".checklist\").insertBefore(row, widget.querySelector(\".add-item\"));\r\n            attachChecklistEvents();\r\n            save();\r\n        };\r\n    });\r\n}\r\n\r\nfunction hydrateWidgets() {\r\n    document.querySelectorAll(\".widget\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n        const type = widget.dataset.type;\r\n\r\n        // TEXT WIDGET\r\n        if (!type && widgetData[id]) {\r\n            const textarea = widget.querySelector(\".widget-text\");\r\n            if (textarea) textarea.value = widgetData[id];\r\n        }\r\n\r\n        // CHECKLIST WIDGET\r\n        if (type === \"checklist\" && widgetData[id]) {\r\n            const list = widget.querySelector(\".checklist\");\r\n            const addBtn = list.querySelector(\".add-item\");\r\n\r\n            // Clear existing items\r\n            list.querySelectorAll(\".check-item\").forEach(i => i.remove());\r\n\r\n            widgetData[id].forEach(item => {\r\n                const row = document.createElement(\"label\");\r\n                row.className = \"check-item\";\r\n                row.innerHTML = `\r\n          <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n          <input type=\"text\" value=\"${item.text}\" />\r\n        `;\r\n                list.insertBefore(row, addBtn);\r\n            });\r\n        }\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}"]}