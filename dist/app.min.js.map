{"version":3,"sources":["app.js"],"names":["widgetData","JSON","parse","localStorage","getItem","setTheme","theme","document","documentElement","dataset","setItem","float","cellHeight","savedLayout","addTextWidget","savedText","arguments","length","undefined","widgetId","concat","Date","now","w","h","content","attachWidgetEvents","widget","closest","forEach","btn","onclick","id","target","removeWidget","e","attachTextPersistence","stringify","grid","item","querySelectorAll","textarea","oninput","resetDashboard","value","confirmed","confirm","removeAll","hydrateWidgetText","addChecklistWidget","savedId","savedItems","querySelector","itemsHTML","attachChecklistEvents","map","checked","text","join","row","save","items","_toConsumableArray","input","onchange","createElement","className","innerHTML","insertBefore","load","on"],"mappings":"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","file":"app.min.js","sourcesContent":["let widgetData = JSON.parse(localStorage.getItem(\"widgetData\")) || {};\r\n\r\n// Theme\r\ndocument.documentElement.dataset.theme =\r\n    localStorage.getItem(\"theme\") || \"dark\";\r\n\r\nfunction setTheme(theme) {\r\n    document.documentElement.dataset.theme = theme;\r\n    localStorage.setItem(\"theme\", theme);\r\n}\r\n\r\n// Init Gridstack\r\nconst grid = GridStack.init({\r\n    float: true,\r\n    cellHeight: 120,\r\n    disableOneColumnMode: false\r\n});\r\n\r\n// Load saved layout\r\nconst savedLayout = JSON.parse(localStorage.getItem(\"layout\"));\r\nif (savedLayout) {\r\n    grid.load(savedLayout);\r\n    setTimeout(hydrateWidgetText, 100);\r\n}\r\n\r\n\r\n// Save layout on change\r\ngrid.on(\"change\", () => {\r\n    localStorage.setItem(\"layout\", JSON.stringify(grid.save(true)));\r\n});\r\n\r\n// Add text widget\r\nfunction addTextWidget(savedId = null, savedText = \"\") {\r\n    const widgetId = savedId || `widget-${Date.now()}`;\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 2,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <textarea\r\n          class=\"widget-text\"\r\n          placeholder=\"Write here...\">${savedText}</textarea>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction attachWidgetEvents() {\r\n    document.querySelectorAll(\".delete-btn\").forEach(btn => {\r\n        btn.onclick = (e) => {\r\n            const item = e.target.closest(\".grid-stack-item\");\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n\r\n            delete widgetData[id];\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n\r\n            grid.removeWidget(item);\r\n        };\r\n    });\r\n\r\n    attachTextPersistence();\r\n}\r\n\r\nfunction attachTextPersistence() {\r\n    document.querySelectorAll(\".widget-text\").forEach(textarea => {\r\n        textarea.oninput = (e) => {\r\n            const widget = e.target.closest(\".widget\");\r\n            const id = widget.dataset.id;\r\n            widgetData[id] = e.target.value;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n    });\r\n}\r\n\r\nfunction resetDashboard() {\r\n    const confirmed = confirm(\r\n        \"This will clear all widgets and notes. Are you sure?\"\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    grid.removeAll();\r\n    localStorage.removeItem(\"layout\");\r\n    localStorage.removeItem(\"widgetData\");\r\n\r\n    widgetData = {};\r\n}\r\n\r\nfunction hydrateWidgetText() {\r\n    document.querySelectorAll(\".widget\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n        const textarea = widget.querySelector(\".widget-text\");\r\n\r\n        if (widgetData[id]) {\r\n            textarea.value = widgetData[id];\r\n        }\r\n    });\r\n\r\n    attachWidgetEvents();\r\n}\r\n\r\nfunction addChecklistWidget(savedId = null, savedItems = []) {\r\n    const widgetId = savedId || `checklist-${Date.now()}`;\r\n\r\n    const itemsHTML = savedItems.map(\r\n        item => `\r\n      <label class=\"check-item\">\r\n        <input type=\"checkbox\" ${item.checked ? \"checked\" : \"\"} />\r\n        <input type=\"text\" value=\"${item.text}\" />\r\n      </label>\r\n    `\r\n    ).join(\"\");\r\n\r\n    grid.addWidget({\r\n        w: 3,\r\n        h: 3,\r\n        content: `\r\n      <div class=\"widget\" data-id=\"${widgetId}\" data-type=\"checklist\">\r\n        <div class=\"widget-header\">\r\n          <button class=\"delete-btn\">✕</button>\r\n        </div>\r\n        <div class=\"checklist\">\r\n          ${itemsHTML}\r\n          <button class=\"add-item\">＋ Add item</button>\r\n        </div>\r\n      </div>\r\n    `\r\n    });\r\n\r\n    attachWidgetEvents();\r\n    attachChecklistEvents();\r\n}\r\n\r\nfunction attachChecklistEvents() {\r\n    document.querySelectorAll(\".widget[data-type='checklist']\").forEach(widget => {\r\n        const id = widget.dataset.id;\r\n\r\n        const save = () => {\r\n            const items = [...widget.querySelectorAll(\".check-item\")].map(row => ({\r\n                text: row.querySelector(\"input[type='text']\").value,\r\n                checked: row.querySelector(\"input[type='checkbox']\").checked\r\n            }));\r\n\r\n            widgetData[id] = items;\r\n            localStorage.setItem(\"widgetData\", JSON.stringify(widgetData));\r\n        };\r\n\r\n        widget.querySelectorAll(\"input\").forEach(input => {\r\n            input.oninput = save;\r\n            input.onchange = save;\r\n        });\r\n\r\n        widget.querySelector(\".add-item\").onclick = () => {\r\n            const row = document.createElement(\"label\");\r\n            row.className = \"check-item\";\r\n            row.innerHTML = `\r\n        <input type=\"checkbox\" />\r\n        <input type=\"text\" placeholder=\"List item\" />\r\n      `;\r\n            widget.querySelector(\".checklist\").insertBefore(row, widget.querySelector(\".add-item\"));\r\n            attachChecklistEvents();\r\n            save();\r\n        };\r\n    });\r\n}"]}